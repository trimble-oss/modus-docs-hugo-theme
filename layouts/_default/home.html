{{ define "main" }}

<div class="container-fluid">
  <div class="row row-main px-0">

    <div class="col-1 col-sidebar px-0 bg-body shadow-sm">
      {{ partial "col-sidebar" . }}
    </div>

    <div class="col col-auto px-0 collapse collapse-horizontal bg-dark bg-opacity-10" id="sidebar">
      <div id="sidebar-menu" class="z-2 sticky-top sticky-offset shadow-sm overflow-auto w-100">
        {{ partial "col-sidebar-menu" . }}
      </div>
    </div>

    <div class="col col-auto col-12 col-main border-start p-0 overflow-x-hidden">

      <script>
        function _calculateScrollbarWidth() {
          document.documentElement.style.setProperty('--scrollbar-width', (window.innerWidth - document.documentElement.clientWidth) + "px");
        }
        // recalculate on resize
        window.addEventListener('resize', _calculateScrollbarWidth, false);
        // recalculate on dom load
        document.addEventListener('DOMContentLoaded', _calculateScrollbarWidth, false);
        // recalculate on load (assets loaded as well)
        window.addEventListener('load', _calculateScrollbarWidth);
      </script>

      <main id="main" class="container">

        {{ .Content }}

      </main>

      <footer class="p-2 footer py-4 bg-secondary bg-opacity-10">
        {{ partial "footer" . }}
      </footer>
    </div>

  </div>
</div>
{{- end -}}
